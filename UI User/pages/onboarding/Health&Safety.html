<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Health & safety</title>
    <!-- plugins:css -->
    <link
      rel="stylesheet"
      href="../../vendors/simple-line-icons/css/simple-line-icons.css"
    />
    <link
      rel="stylesheet"
      href="../../vendors/flag-icon-css/css/flag-icon.min.css"
    />
    <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css" />
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End Plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <!--End layout styles-->

    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="shortcut icon" href="../../images/tshimologong_logo_white.gif" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <div class="container-scroller">
      <!-- partial:../../partials/_navbar.html -->
      <nav
        class="
          navbar
          default-layout-navbar
          col-lg-12 col-12
          p-0
          fixed-top
          d-flex
          flex-row
        "
      >
        <div class="navbar-brand-wrapper d-flex align-items-center">
          <a class="navbar-brand brand-logo" href="../../index.html">
            <img
              src="../../images/home_images/tshimologong_logo_white (1).gif"
              alt="logo"
              class="logo-dark"
            />
          </a>
          <a class="navbar-brand brand-logo-mini" href="../../index.html"
            ><img src="../../images/tshimologong_logo_white.gif" alt="logo"
          /></a>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-center flex-grow-1">
          <h5 class="mb-0 font-weight-medium d-none d-lg-flex">
            Welcome to tshimologong on boarding!
          </h5>
          <ul class="navbar-nav navbar-nav-right ml-auto">
            <li class="nav-item dropdown d-none d-xl-inline-flex user-dropdown">
              <a
                class="nav-link dropdown-toggle"
                id="UserDropdown"
                href="#"
                data-toggle="dropdown"
                aria-expanded="false"
              >
                <img
                  class="img-xs rounded-circle ml-2 recruitImg"
                  src="images/faces/face8.jpg"
                  alt="Profile image"
                />
                <span class="font-weight-normal recruitFullname text-white">
                  ofentse khampe
                </span></a
              >
              <div
                style="background-color: #f2f6f6"
                class="dropdown-menu dropdown-menu-right navbar-dropdown"
                aria-labelledby="UserDropdown"
              >
                <div class="dropdown-header text-center">
                  <img
                    class="img-md rounded-circle recruitImg"
                    style="width: 30%"
                    src="images/faces/face8.jpg"
                    alt="Profile image"
                  />
                  <p style="color: black" class="mb-1 mt-3 recruitFullname">
                    Fentse
                  </p>
                  <p
                    style="color: black"
                    class="font-weight-light text-muted mb-0 recruitEmail"
                  >
                    ofentseKhampe@gmail.com
                  </p>
                </div>
                <a
                  style="color: black"
                  class="dropdown-item"
                  href="../../pages/profile/Profile.html"
                  ><i class="dropdown-item-icon icon-user text-primary"></i> My
                  Profile <span class="badge badge-pill badge-danger"></span
                ></a>

                <a class="dropdown-item" style="color: black" id="signOut"
                  ><i class="dropdown-item-icon icon-power text-primary"></i
                  >Sign Out</a
                >
              </div>
            </li>
          </ul>
          <button
            class="
              navbar-toggler navbar-toggler-right
              d-lg-none
              align-self-center
            "
            type="button"
            data-toggle="offcanvas"
          >
            <span class="icon-menu"></span>
          </button>
        </div>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:../../partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar ">
          <ul class="nav">
            <li class="nav-item nav-profile">
              <a href="# " class="nav-link">
                <div class="profile-image">
                  <img
                    class="img-xs rounded-circle"
                    src="../../images/faces/face8.jpg "
                    alt="profile image "
                  />
                  <div class="dot-indicator bg-success"></div>
                </div>
                <div class="text-wrapper">
                  <p class="profile-name">Ofentse Khampe</p>
                  <p class="designation">Intern</p>
                </div>
              </a>
            </li>
            <li class="nav-item nav-category">
              <span class="nav-link">Dashboard</span>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../index.html ">
                <span class="menu-title">HOME</span>
                <i class="icon-home menu-icon"></i>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../profile/Profile.html ">
                <span class="menu-title">PROFILE</span>
                <i class="icon-user menu-icon"></i>
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="../../pages/onboarding/onboarding.html "
              >
                <span class="menu-title">ONBOARDING</span>
                <i class="icon-note menu-icon"></i>
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="../../pages/Departments/Department.html "
              >
                <span class="menu-title">DEPARTMENTS</span>
                <i class="icon-people menu-icon"></i>
              </a>
            </li>
          </ul>
        </nav>
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="page-header">
              <h3 class="page-title"><a href="./onboarding.html">Back</a></h3>
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item">
                    <a href="#">Health and Safety</a>
                  </li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Onboarding
                  </li>
                </ol>
              </nav>
            </div>

            <div class="row">
              <div class="col-lg-13 grid-margin stretch-card">
                <div class="card check">
                  <div class="card-body">
                    <h4 class="card-title">Health and safety</h4>
                    <div class="intro">
                      <div class="popout-video">
                        <video
                          src="./Understanding COVID-19 and How to Stay Safe.mp4"
                          playsinline
                          controls
                          class="intro-video"
                          preload="auto"
                          type="video/mp4"
                          autoplay
                          muted
                        ></video>
                        <div class="popout-video__controls">
                          <div class="close-video"></div>
                        </div>
                      </div>
                    </div>
                    <div class="contentss">
                      <h4>COVID-19 WORKPLACE SCREENING</h4>
                      <ul>
                        <b>What is Screening</b>
                        <li>
                          Screening is conducted to determine your risk of
                          having contracted Covid19.
                        </li>
                        <li>
                          Screening is conducted to Identify and ensure that
                          individual that may have been compromised or
                          previously exposed are not allowed into th workplace
                          in order to prevent the transmission of the virus
                        </li>
                        <li>
                          Screening is conducted to identify individuals that
                          may need to seek medical attention and undergo further
                          testing.
                        </li>
                        <br />
                        <b>
                          What equipment will the person doing the screening
                          use?</b
                        >
                        <li>
                          Screening is conducted by asking the individual a few
                          questions pertaining to travel history, potential
                          exposure and symptoms
                        </li>
                        <li>
                          A screening form will be used to record your screening
                          results
                        </li>
                        <li>
                          There are various temperature monitoring devices, most
                          commonly a no contact infrared thermometer will be
                          used to test your temperature, a contact thermometer
                          may be used as a secondary measure when high
                          temperatures are recorded.
                        </li>
                        <br />
                        <b
                          >Is there a difference between screening and
                          testing?</b
                        >
                        <li>
                          Screening is describes as the evaluation or
                          investigation of something as part of a methodical
                          survey.
                        </li>
                        <li>
                          Screening for Covid 19 is conducted by using a
                          specific questionnaire developed to identify an
                          individual that has potentially been exposed or
                          compromised.
                        </li>
                        <li>
                          Temperature testing and monitoring forms part of the
                          screening process for Covid 19.
                        </li>
                        <li>
                          A diagnosis can only be confirmed by a Covid 19 test.
                        </li>
                        <li>
                          Testing is described as an examination of part of the
                          body or a body fluid for medical purposes
                        </li>
                        <li>
                          COVID-19 IS diagnosed by a laboratory test called a
                          polymerase chain reaction (PCR) molecular test. The
                          test investigates a sample taken from a patient’s
                          respiratory tract, that is, the nose, throat or chest
                          and looks for the viral particles in them.
                        </li>
                        <br />
                        <b
                          >What questions will I be asked during the screening
                          process?</b
                        >
                        <li>
                          Have you travelled to a high risk country in the last
                          14 days?
                        </li>
                        <li>
                          Have you had contact with anyone with a confirmed
                          covid-19 in the last 14 days?
                        </li>
                        <li>
                          Have you experienced symptoms such as fever, cough and
                          difficulty in breathing?
                        </li>
                        <li>Do you feel feverish/ flushed/ warm?</li>
                        <li>Do you have headache.</li>
                        <li>Do you have joint pain</li>
                        <li>Do you have diarrhoea?</li>
                        <li>
                          You must be honest when answering these questions as
                          it could save your life as well as the life of those
                          around you.
                        </li>

                        <br />
                        <b
                          >What happens if my screening does not raise any cause
                          for concern?</b
                        >

                        <li>
                          Depending on where you are being screened, you will be
                          able to proceed to enter the facility you are
                          visiting, i.e. workplace, hospital, go home etc.
                        </li>
                        <li>
                          <strong
                            >You will be required to continuously on a frequent
                            basis:</strong
                          >
                        </li>
                        <li>
                           Wash your hands often with soap and water for 20
                          seconds, or use alcohol-based hand sanitiser.
                        </li>
                        
                        <li>
                          Cover your nose and mouth with a disposable tissue or
                          flexed elbow when you cough or sneeze  Do not touch
                          your eyes, nose or mouth.
                        </li>
                        <li> Avoid close contact with people.</li>
                        <li>
                           Stay at home and self-isolate from others in the
                          household should you fell unwell
                        </li>
                      </ul>
                    </div>
                    <div
                      class="ct-chart ct-perfect-fourth"
                      id="ct-chart-line"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-10 grid-margin stretch-card">
                <div class="card check">
                  <div class="card-body">
                    <h4 style="text-decoration: underline">
                      HEALTH AND SAFETY RULES FOR ALL VISITORS AND CONTRACTORS
                    </h4>
                    <ol>
                      <strong
                        >At this facility all visitors and contractors must
                        ensure that they:</strong
                      >
                      <li>
                        Abide by all Occupational Health and Safety rules,
                        regulations and Policies adopted for WITS
                        INCUBATOR-BRAAMFONTEIN
                      </li>
                      <li>
                        Are accompanied by a member of staff when entering any
                        work place or section of a work place within this
                        building.
                      </li>
                      <li>
                        Do not interfere with any employee or work activity
                        being carried out.
                      </li>
                      <li>
                        Take care of their health and safety and that of other
                        persons who may be affected by their acts or omissions.
                      </li>
                      <li>
                        Carry out any lawful order given to them by the employer
                        or any other authorised employee of the company.
                      </li>
                      <li>
                        Refrain from smoking in the office block and use
                        dedicated smoking areas only.
                      </li>
                      <li>
                        In the event of an emergency,abide by the WITS
                        INCUBATOR_BRAAMFONTEIN emergency plan.
                      </li>
                      <strong
                        ><i style="color: red">
                          THE MOST IMPORTANT OCCUPATIONAL HEALTH AND SAFETY
                          RULE: YOU ARE ULTIMATELY RESPONSIBLE FOR YOUR OWN
                          SAFETY
                        </i></strong
                      >
                    </ol>

                    <div
                      class="ct-chart ct-perfect-fourth"
                      id="ct-chart-line"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <!--Complete task-->
                <div class="card check" style="display: block">
                  <input
                    type="button"
                    class="btn btn-primary btn-block btnComplete"
                    value="Click to Complete"
                  />
                  <i
                    class="btn btn-success bi-check-circle-fill"
                    style="cursor: none; display: none"
                  ></i>
                </div>
              </div>
            </div>
          </div>
          <h3 id="title" style="display: none">Health and Safety</h3>

          <!-- content-wrapper ends -->
          <!-- partial:../../partials/_footer.html -->
          <footer class="footer">
            <div
              class="
                d-sm-flex
                justify-content-center justify-content-sm-between
              "
            >
              <span
                class="
                  text-muted
                  d-block
                  text-center text-sm-left
                  d-sm-inline-block
                "
                >Copyright © Tshimologong.joburg 2021</span
              >
            </div>
          </footer>
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#LoginModal2"
            id="btnLoginFail"
            style="display: none"
          >
            Failed Login
          </button>

          <div
            class="modal fade"
            id="LoginModal2"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                    Login Attempt Fail
                  </h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                    id="loginFailCloseIcon"
                  ></button>
                </div>
                <div class="modal-body text-danger">
                  <h2>Login Required to access this page!</h2>
                </div>
                <div class="modal-body text-danger" id="closeTimer"></div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-bs-dismiss="modal"
                    id="loginFailClose"
                  >
                    Close
                  </button>
                </div>
              </div>
            </div>
          </div>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="../../vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="../../js/off-canvas.js"></script>
    <script src="../../js/misc.js"></script>
    <!-- endinject -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>
      // button complete and title header
      let btnComplete = document.querySelector('.btnComplete');
      let taskHeader = document.getElementById('title');
      let details;
      $('#signOut').click(function () {
        sessionStorage.clear();

        window.location.href = '../../../index.html';
      });
      $('#loginFailClose,#loginFailCloseIcon').click(function () {
        window.location.href = '../../../index.html';
      });

      window.addEventListener('load', () => {
        details = JSON.parse(sessionStorage.getItem('details'));
        if (!details) {
          document
            .querySelector('#btnLoginFail')
            .dispatchEvent(new Event('click'));

          let closeDisplayMessage = document.getElementById('closeTimer');
          let count = 6;
          var interval = window.setInterval(function () {
            closeDisplayMessage.innerHTML =
              '<h2>Redirecting to login page in :' + count + '</h2>';
            count--;
            if (count === 0) {
              clearInterval(interval);
              document
                .getElementById('loginFailClose')
                .dispatchEvent(new Event('click'));
            }
          }, 1000);
        } else {
          details = details[0];

          let userFullanme = document.querySelectorAll('.recruitFullname');
          userFullanme.forEach((usfn) => {
            usfn.innerHTML = details.firstname + ' ' + details.lastname;
          });

          let email = document.querySelectorAll('.recruitEmail');
          email.forEach((mail) => {
            mail.innerHTML = details.userEmail;
          });

          $.ajax({
            url: 'https://localhost:44318/api/User/ImageUrl',
            method: 'POST',
            data: {
              id: details.userID,
            },
            success: function (dataResponse) {
              let imgProfiles = document.querySelectorAll('.recruitImg');
              if (dataResponse) {
                for (img of imgProfiles) {
                  img.src = 'https://localhost:44318/' + dataResponse;
                }
              } else {
                for (img of imgProfiles) {
                  img.src = '../../images/default.png';
                }
              }
            },
            error: function () {
              alert('Server/network error, request not complete');
            },
            complete: function () {},
          });

          btnComplete.setAttribute('id', details.userID);
          console.log(details);
          $.ajax({
            url: 'https://localhost:44318/api/User/GetCompleteTasks',
            method: 'POST',
            data: {
              id: details.userID,
            },
            success: function (responseData) {
              responseData = JSON.parse(responseData);
              if (responseData.length) {
                let TaskCompleted = [];
                responseData.forEach((response) =>
                  TaskCompleted.push(response.TaskCompleted)
                );
                TaskCompleted.forEach((task) => {
                  if (taskHeader.firstChild.nodeValue === task) {
                    btnComplete.setAttribute('value', 'Task Completed');
                    btnComplete.setAttribute('disabled', 'disabled');
                    btnComplete.classList = 'btn btn-success';
                    btnComplete.parentElement.classList.add('bg-success');
                    btnComplete.nextElementSibling.style.display = '';
                  }
                });
                console.log(TaskCompleted);
              }
            },
            error: function () {
              alert('Server error retrieving completed task');
            },
          });
        }
      });

      // Complete  Requests
      btnComplete.addEventListener('click', function () {
        let userId = btnComplete.getAttribute('id');
        $.ajax({
          url: 'https://localhost:44318/api/User/MarkAsDone',
          method: 'POST',
          data: {
            UserId: userId,
            Task: taskHeader.firstChild.nodeValue,
          },
          success: function (responseData) {
            // modal for confirming completion.
            location.reload();
          },
          error: function () {
            alert('Server error');
          },
        });
      });
    </script>
  </body>
</html>
